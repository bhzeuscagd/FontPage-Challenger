---
import Icon from "./Icon.astro";

const menuItems = [
  { label: "Today", icon: "Calendar", href: "/dashboard" },
  { label: "Read Later", icon: "Bookmark", href: "/bookmarks" },
  { label: "My Feeds", icon: "Rss", href: "/feeds" },
  { label: "Explore", icon: "Globe", href: "/explore" },
  { label: "Settings", icon: "Settings", href: "/settings" },
];

const currentPath = Astro.url.pathname;
---

<aside class="w-56 flex flex-col h-full py-6">
  <!-- Logo -->
  <div class="px-6 mb-6">
    <a
      href="/dashboard"
      class="flex items-center gap-2 text-text-primary no-underline"
    >
      <Icon name="Rss" size={22} />
      <span class="text-lg font-serif font-bold tracking-tight">Frontpage</span>
    </a>
  </div>

  <!-- Horizontal line separator -->
  <div class="mx-6 h-px bg-border mb-4"></div>

  <!-- Navigation -->
  <nav class="flex-1 px-3">
    <ul class="space-y-1">
      {
        menuItems.map((item) => {
          const isActive = currentPath === item.href;
          return (
            <li>
              <a
                href={item.href}
                class:list={[
                  "sidebar-link flex items-center gap-3 px-3 py-2.5 text-sm font-medium transition-all no-underline relative",
                  isActive
                    ? "text-text-primary active"
                    : "text-text-secondary hover:text-text-primary",
                ]}
              >
                <span>{item.label}</span>
              </a>
            </li>
          );
        })
      }
    </ul>
  </nav>

  <!-- Bottom user area -->
  <div class="p-3 mt-auto">
    <div
      class="flex items-center gap-3 p-2 rounded-xl border border-transparent hover:bg-text-primary hover:border-text-primary transition-all cursor-pointer group"
    >
      <div
        class="w-9 h-9 rounded-full bg-surface border border-border flex items-center justify-center text-xs font-bold text-text-secondary group-hover:text-bg-primary group-hover:border-bg-primary/30 transition-colors"
      >
        <Icon name="User" size={16} />
      </div>
      <div class="flex-1 min-w-0">
        <p
          class="text-sm font-medium text-text-primary group-hover:text-bg-primary truncate"
          id="user-name"
        >
          User Name
        </p>
        <p
          class="text-xs text-text-secondary group-hover:text-bg-primary/70 truncate opacity-80"
          id="user-info"
        >
          user@example.com
        </p>
      </div>
      <Icon
        name="Chevron"
        size={16}
        class="text-text-secondary opacity-50 group-hover:opacity-100 group-hover:text-bg-primary"
      />
    </div>
  </div>
</aside>

<style>
  .sidebar-link::after {
    content: "";
    position: absolute;
    bottom: 2px;
    left: 12px;
    width: 0;
    height: 2px;
    background-color: var(--color-text-primary);
    transition: width 0.3s ease;
  }

  .sidebar-link:hover::after {
    width: calc(100% - 24px);
  }

  .sidebar-link.active::after {
    width: calc(100% - 24px);
  }
</style>
