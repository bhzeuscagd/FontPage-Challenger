---
import Icon from "./Icon.astro";
---

<button
    id="theme-toggle"
    class="fixed bottom-6 right-6 z-9999 w-11 h-11 flex items-center justify-center bg-text-primary text-bg-primary border-none rounded-lg cursor-pointer transition-opacity duration-200 shadow-[0_2px_8px_rgba(0,0,0,0.2)] hover:opacity-85"
    aria-label="Cambiar tema"
>
    <Icon name="Sun" size={20} class="icon-sun" />
    <Icon name="Moon" size={20} class="icon-moon" />
</button>

<script>
    const toggle = document.getElementById("theme-toggle");
    const html = document.documentElement;

    // Load saved theme or default to light
    const saved = localStorage.getItem("theme");
    if (saved === "dark") {
        html.setAttribute("data-theme", "dark");
    }

    toggle?.addEventListener("click", () => {
        const isDark = html.getAttribute("data-theme") === "dark";
        if (isDark) {
            html.removeAttribute("data-theme");
            localStorage.setItem("theme", "light");
        } else {
            html.setAttribute("data-theme", "dark");
            localStorage.setItem("theme", "dark");
        }
    });
</script>
